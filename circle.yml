## Customize the test machine
machine:
  pre:
    - curl -sSL https://s3.amazonaws.com/circle-downloads/install-circleci-docker.sh | bash -s -- 1.10.0
  post:
      - pip install --upgrade docker-compose==1.8.0
      - npm install -g triton yarn
      - echo '{"url":"https://eu-ams-1.api.joyent.com","account":"'$SDC_ACCOUNT'","keyId":"c3:30:35:9b:85:48:73:44:31:cc:4b:2e:6a:00:16:e2","name":"eu-ams-1","curr":true}' | triton profile create -f -
      - alias yarn='yarn > /dev/null'

  timezone:
    Europe/London

  services:
      - docker
  node:
    version: 6.9.0

dependencies:
  post:
      - make install

test:
  post:
      - make test

deployment:
  production: # just a label; label names are completely up to you
    branch: master
    commands:
      - ./bin/deploy

## Custom notifications
# notify:
#   webhooks:
#     # A list of hashes representing hooks. Only the url field is supported.
#     - url: https://someurl.com/hooks/circle
